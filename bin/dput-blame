#!/usr/bin/env python

from dput.profile import get_blame_map, profiles
import json
import sys

if len(sys.argv) <= 1:
    print "Error in usage:"
    print "  dput-blame target"
    sys.exit(2)

foo = sys.argv[1]
if foo not in profiles():
    print "No such target."
    sys.exit(1)

print json.dumps(get_blame_map(foo), sort_keys=True, indent=4)
